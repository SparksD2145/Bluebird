Bluebird.service("Bluebird.Services.Products",["$resource","_",function(a,b){var c=[],d=a("/api/product/:query");this.add=function(a){return b.isUndefined(a)?!1:b.isArray(a)?c=b.union(c,a):(c.save(a),c)},this.remove=function(a){if(b.isUndefined(a))return!1;var d=function(d){return b.isNumber(d)?c=b.without(c,b.findWhere(c,{_id:a})):b.isUndefined(d._id)?!1:c=b.without(c,d)};return b.isArray(a)?c=b.difference(c,a):d(a)},this.find=function(a){return b.isUndefined(a)?null:b.isNumber(a)?b.findWhere(c,{_id:a}):b.isObject(a)?b.where(c,a):!1},this.query=function(a,b,c){var e=function(a){return this.add(a),c(a)}.bind(this),f=[{query:a,extendedSearch:b},function(a){e(a)}];d.query.apply(this,f)}}]);